/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[14],{471:function(Aa,wa,r){function oa(){return!1}function na(x,ca,ja){if(!(ca in z))return!0;ca=z[ca];for(var ba=0;ba<ca.length;ba++){var ea=x;var ia=ca[ba];var ha=ja;if(ia.name in ea){var la="",ka=!1;ea=ea[ia.name];switch(ia.type){case "s":la="String";ka=Object(da.isString)(ea);break;case "a":la="Array";ka=Object(da.isArray)(ea);break;case "n":la="Number";ka=Object(da.isNumber)(ea)&&Object(da.isFinite)(ea);break;case "o":la="Object",
ka=Object(da.isObject)(ea)&&!Object(da.isArray)(ea)}ka||ha.reject('Expected response field "'+ia.name+'" to have type '+la);ia=ka}else ha.reject('Response missing field "'+ia.name+'"'),ia=!1;if(!ia)return!1}return!0}function ma(x){for(var ca=0,ja=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ca<ja.length;ca++){var ba=ja[ca],ea=ba;ba=ba.charAt(0).toUpperCase()+ba.slice(1);x[ea]&&(Object.defineProperty(x,ba,Object.getOwnPropertyDescriptor(x,
ea)),delete x[ea])}return x}r.r(wa);var fa=r(0),da=r(1);r.n(da);var aa=r(2);Aa=r(48);var y=r(23),w=r(488),f=r(100),e=r(398),a=r(43),b=r(178),h=function(){function x(){this.request=this.result=null;this.state=0;var ca=this;ca.promise=new Promise(function(ja,ba){ca.resolve=function(){if(0===ca.state||4===ca.state)ca.state=1,ca.result=arguments[0],ja.apply(null,arguments)};ca.reject=function(){if(0===ca.state||4===ca.state)ca.state=2,ba.apply(null,arguments)}})}x.prototype.au=function(){return 1===(this.state&
1)};x.prototype.kia=function(){return 2===(this.state&2)};x.prototype.fj=function(){return!this.kia()&&!this.au()};x.prototype.Lha=function(){return 4===(this.state&4)};x.prototype.YN=function(){this.state|=4};return x}(),n=function(){function x(){this.It={};this.Ob=[]}x.prototype.pop=function(){var ca=this.Ob.pop();this.It[ca.key]=void 0;return ca};x.prototype.push=function(ca,ja){ja={key:ca,data:ja};this.Ob.push(ja);this.It[ca]=ja.data};x.prototype.contains=function(ca){return!!this.It[ca]};x.prototype.get=
function(ca){return this.It[ca]};x.prototype.set=function(ca,ja){var ba=this;this.It[ca]=ja;this.Ob.forEach(function(ea,ia){ea.key===ca&&(ba.Ob[ia]=ea)})};x.prototype.remove=function(ca){var ja=this;this.It[ca]=void 0;this.Ob.forEach(function(ba,ea){ba.key===ca&&ja.Ob.splice(ea,1)})};x.prototype.length=function(){return this.Ob.length};return x}(),z={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},
{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};r=function(){function x(ca,ja,ba){var ea=this;this.DO=this.DU=!1;this.xh=this.AG=this.ov=this.Cf=this.pu=this.RI=this.rn=null;this.Tm=new h;
this.cq=new h;this.tC=!1;this.Kf=this.Ie=this.Je=this.Bf=null;this.hg=[];this.fD=[];this.cache={};this.timeStamp=0;this.sh=[];this.pj=[];this.WJ=null;this.rU=!1;this.f0=this.id=null;this.fM=this.YW=oa;this.pi=0;this.gL=!1;this.IY=1;this.lj={};this.As=0;this.Du=new n;ja.endsWith("/")||(ja+="/");ba=ba||{};this.DU=ba.disableWebsockets||!1;this.DO=ba.singleServerMode||!1;null!=ba.customQueryParameters&&Object(a.b)("wvsQueryParameters",ba.customQueryParameters);ja.endsWith("blackbox/")||(ja+="blackbox/");
this.rn=ba.uploadData||null;this.ov=ba.uriData||null;this.RI=ba.cacheKey||null;if(this.pu=ba.officeOptions||null)this.pu=ma(this.pu);this.Cf=ba.rasterizerOptions||null;this.cf=ja;this.zJ=ca;this.$o(!0);this.Qs=(new w.a(ja,null,this.ai())).Rda(!this.DU,function(ia){ea.Eja(ia)},function(){return null},function(){ea.tC=!1},function(){ea.Nma()})}x.prototype.raa=function(){var ca=this;return new Promise(function(ja,ba){var ea=new XMLHttpRequest;ea.open("GET",ca.cf+"ck");ea.withCredentials=ca.ai();ea.onreadystatechange=
function(){ea.readyState===XMLHttpRequest.DONE&&(200===ea.status?ja():ba())};ea.send()})};x.prototype.Hoa=function(ca){this.YW=ca||oa;this.fM=oa};x.prototype.a$=function(){this.J_();return this.Qs.rq(!0)};x.prototype.J_=function(){Object(fa.b)(this,void 0,void 0,function(){return Object(fa.d)(this,function(ca){switch(ca.label){case 0:return this.cq=new h,this.Tm=new h,this.tC=!1,this.id=null,this.rU=!1,[4,this.raa()];case 1:return ca.ca(),[2]}})})};x.prototype.Nma=function(){this.YW();this.J_();this.Bf&&
(this.Bf.fj()?this.Dh(this.Bf.request):this.Bf.au()&&this.fM(this.Bf.result.url,"pdf")&&(this.Bf=null,this.I_()));this.Kf&&this.Kf.fj()&&this.Dh(this.Kf.request);this.Je&&this.Je.fj()?this.Dh(this.Je.request):this.Ie&&this.Ie.fj()&&this.LW();var ca;for(ca=0;ca<this.sh.length;ca++)this.sh[ca]&&(this.sh[ca].fj()?this.Dh(this.sh[ca].request):this.sh[ca].au()&&this.fM(this.sh[ca].result.url,"image")&&(this.sh[ca]=null,this.AF(Object(da.uniqueId)(),ca)));for(ca=0;ca<this.pj.length;ca++)this.pj[ca]&&this.pj[ca].fj()&&
!this.pj[ca].Lha()&&this.Dh(this.pj[ca].request);for(ca=0;ca<this.hg.length;ca++)this.hg[ca]&&this.hg[ca].fj()&&this.Dh(this.hg[ca].request)};x.prototype.sha=function(){return this.tC?Promise.resolve():(this.tC=!0,this.timeStamp=Date.now(),this.Qs.fE())};x.prototype.nra=function(){var ca=this,ja,ba,ea,ia,ha;return new Promise(function(la,ka){if(ca.rn)ja=new FormData,ja.append("file",ca.rn.fileHandle,ca.rn.fileHandle.name),ba=ca.rn.loadCallback,ia="upload",ea=ca.rn.extension;else if(ca.ov)ja={uri:ca.ov.uri,
Kva:ca.ov.shareId},ja=Object.keys(ja).map(function(ra){return ra+"="+(ja[ra]?encodeURIComponent(ja[ra]):"")}).join("&"),ha="application/x-www-form-urlencoded; charset=UTF-8",ba=ca.ov.loadCallback,ia="url",ea=ca.ov.extension;else{la();return}var pa=new XMLHttpRequest,qa=Object(y.k)(ca.cf,"AuxUpload");qa=Object(b.a)(qa,{type:ia,ext:ea});pa.open("POST",qa);pa.withCredentials=ca.ai();ha&&pa.setRequestHeader("Content-Type",ha);pa.addEventListener("load",function(){if(pa.readyState===pa.DONE&&200===pa.status){var ra=
JSON.parse(pa.response);ca.zJ=ra.uri;ba(ra);la(ra)}});pa.addEventListener("error",function(){ka(pa.statusText+" "+JSON.stringify(pa))});ca.rn&&null!=ca.rn.onProgress&&(pa.upload.onprogress=function(ra){ca.rn.onProgress(ra)});pa.send(ja)})};x.prototype.Ema=function(ca){this.password=ca||null;this.Tm.au()||(this.Tm=new h,this.Dh({t:"pages"}));return this.Tm.promise};x.prototype.dz=function(ca){this.WJ=ca||null;this.Tm.au()||this.Dh({t:"pages"});return this.Tm.promise};x.prototype.Iw=function(ca){ca=
Object.assign(ca,{uri:encodeURIComponent(this.zJ)});this.WJ&&(ca.ext=this.WJ);this.xh&&(ca.c=this.xh);this.password&&(ca.pswd=this.password);this.RI&&(ca.cacheKey=this.RI);this.pu&&(ca.officeOptions=this.pu);this.Cf&&(ca.rastOptions=this.Cf);return ca};x.prototype.mna=function(){0<this.Du.length()&&10>=this.As&&this.nna(this.Du.pop().data)};x.prototype.x9=function(ca){0<this.Du.length()&&this.Du.contains(ca)&&this.Du.remove(ca)};x.prototype.Dh=function(ca){ca=this.Iw(ca);this.Qs.send(ca)};x.prototype.a0=
function(ca,ja){10<this.As?this.Du.push(ca,ja):(this.As++,ca=this.Iw(ja),this.Qs.send(ca))};x.prototype.nna=function(ca){this.As++;ca=this.Iw(ca);this.Qs.send(ca)};x.prototype.Wl=function(ca){return ca};x.prototype.XW=function(ca){this.DO&&ca?Object(aa.j)("Server failed health check. Single server mode ignoring check."):!this.kua&&ca&&3>=this.pi?(this.gL=!0,this.Qs.rq()):3<this.pi&&(this.DO=!0)};x.prototype.Eja=function(ca){var ja=this,ba=ca.data,ea=ca.err,ia=ca.t;switch(ia){case "upload":ea?this.ora.reject(ea):
this.ora.resolve("Success");break;case "pages":ea?this.Tm.reject(ea):na(ba,ia,this.Tm)&&this.Tm.resolve(ba);break;case "config":if(ea)this.cq.reject(ea);else if(na(ba,ia,this.cq)){this.XW(ba.unhealthy);ba.id&&(this.id=ba.id);if(ba.auth){var ha=Object(a.a)("wvsQueryParameters");ha.auth=ba.auth;Object(a.b)("wvsQueryParameters",ha)}ba.serverVersion&&(this.AG=ba.serverVersion,Object(aa.h)("[WebViewer Server] server version: "+this.AG));ba.serverID?(this.pi=ba.serverID===this.f0&&this.gL?this.pi+1:0,this.f0=
ba.serverID):this.pi=0;this.gL=!1;this.cq.resolve(ba)}break;case "health":ea?this.cq.reject(ea):na(ba,ia,this.cq)&&this.XW(ba.unhealthy);break;case "pdf":ba.url=Object(b.a)(this.cf+"../"+encodeURI(ba.url));ea?this.Bf.reject(ea):na(ba,ia,this.Bf)&&this.Bf.resolve(ba);break;case "ApString2Xod":ba.url=Object(b.a)(this.cf+"../data/"+encodeURI(ba.url));ea?this.lj[ba.rID].reject(ea):na(ba,ia,this.lj[ba.rID])&&this.lj[ba.rID].resolve(ba);break;case "docmod":ba.url=Object(b.a)(this.cf+"../"+encodeURI(ba.url));
ea?this.lj[ba.rID].reject(ea):na(ba,ia,this.Bf)&&this.lj[ba.rID].resolve(ba);break;case "xod":if(ea)this.Je&&this.Je.fj()&&this.Je.reject(ea),this.Ie&&this.Ie.fj()&&this.Ie.reject(ea);else if(ba.notFound)ba.noCreate||this.Je&&this.Je.fj()&&this.Je.resolve(ba),this.Ie&&this.Ie.fj()&&this.Ie.resolve(ba);else{ba.url&&(ba.url=Object(b.a)(this.cf+"../"+encodeURI(ba.url)));if(!this.Ie||this.Ie.au())this.Ie=new h,this.Ie.request={t:"xod",noCreate:!0};this.Je||(this.Je=new h,this.Je.request={t:"xod"});this.Ie.resolve(ba);
this.Je.resolve(ba)}break;case "cAnnots":ha=this.Kf;if(ea)ha.reject(ea);else if(na(ba,ia,ha)){ha.YN();var la=[],ka=ba.annots;ba=function(Ba){var ta=ka[Ba].s,Da=ka[Ba].e,Ga=pa.cf+"../"+encodeURI(ka[Ba].xfdf),za="true"===ka[Ba].hasAppearance?Object(b.a)(Ga+".xodapp"):null,Ha=Object(da.range)(ta,Da+1);la[Ba]={range:Ha,promise:new Promise(function(La,Ia){var Qa=new XMLHttpRequest;Qa.open("GET",Object(b.a)(Ga));Qa.responseType="text";Qa.withCredentials=ja.ai();Qa.addEventListener("load",function(){Qa.readyState===
Qa.DONE&&200===Qa.status&&La({Ir:Qa.response,Ll:za,range:Ha})});Qa.addEventListener("error",function(){Ia(Qa.statusText+" "+JSON.stringify(Qa))});Qa.send()})}};var pa=this;for(ea=0;ea<ka.length;ea++)ba(ea);ha.resolve(la)}break;case "annots":if(ea)this.Kf.reject(ea);else if(na(ba,ia,this.Kf)){this.Kf.YN();var qa=new XMLHttpRequest;ha=this.cf+"../"+encodeURI(ba.url);var ra=ba.hasAppearance?Object(b.a)(ha+".xodapp"):null;qa.open("GET",Object(b.a)(ha));qa.responseType="text";qa.withCredentials=this.ai();
qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ja.Kf.resolve({Ir:qa.response,Ll:ra})});qa.addEventListener("error",function(){ja.Kf.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.As--;var ua=this.sh[ba.p];ea?ua.promise.reject(ea):na(ba,ia,ua)&&(ua.result=ba,ua.result.url=Object(b.a)(this.cf+"../"+encodeURI(ua.result.url)),ua.resolve(ua.result));break;case "tiles":this.As--;ua=ba.rID;ha=this.hg[ua];this.hg[ua]=null;this.fD.push(ua);
if(ea)ha.reject(ea);else if(na(ba,ia,ha)){for(ea=0;ea<ba.tiles.length;ea++)ba.tiles[ea]=Object(b.a)(this.cf+"../"+encodeURI(ba.tiles[ea]));ha.resolve(ba)}break;case "text":ua=this.pj[ba.p];if(ea)ua.reject(ea);else if(na(ba,ia,ua)){ua.YN();var va=new XMLHttpRequest;ba=Object(b.a)(this.cf+"../"+encodeURI(ba.url));va.open("GET",ba);va.withCredentials=this.ai();va.addEventListener("load",function(){va.readyState===va.DONE&&200===va.status&&(ua.result=JSON.parse(va.response),ua.resolve(ua.result))});va.addEventListener("error",
function(Ba){ua.reject(va.statusText+" "+JSON.stringify(Ba))});va.send()}break;case "progress":"loading"===ba.t&&this.trigger(f.a.Events.DOCUMENT_LOADING_PROGRESS,[ba.bytes,ba.total])}this.mna();!ia&&ca.echo&&ca&&"apstring2xod"===ca.echo.t&&(ca=ca.echo.reqID)&&(2<=parseInt(this.AG,10)?this.lj[ca].reject("Message unhandled by server"):this.lj[ca].reject())};x.prototype.wea=function(){return Object(fa.b)(this,void 0,void 0,function(){return Object(fa.d)(this,function(ca){switch(ca.label){case 0:return[4,
this.sha()];case 1:return ca.ca(),[2,this.cq.promise]}})})};x.prototype.cea=function(ca){for(var ja=this,ba=new XMLHttpRequest,ea=Object(b.a)(this.cf+"aul",{id:this.id}),ia=new FormData,ha={},la=0;la<ca.body.length;la++){var ka=ca.body[la];ha[ka.id]=ka.CI.w+";"+ka.CI.h;ia.append(ka.id,ka.CI.dataString)}ca={t:"apstring2xod",reqID:this.IY++,parts:ha};var pa=this.Iw(ca);ia.append("msg",JSON.stringify(pa));this.lj[pa.reqID]=new h;ba.open("POST",ea);ba.withCredentials=this.ai;ea=new Promise(function(qa,
ra){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?qa():ra("An error occurred while sending down appearance strings to the server"))}});ba.send(ia);return ea.then(function(){return ja.lj[pa.reqID].promise})};x.prototype.c$=function(){var ca=this.AG.split("-")[0].split("."),ja=["1","5","9"];if(3!==ca.length)throw Error("Invalid WVS version length.");if(3!==ja.length)throw Error("Invalid version length.");for(var ba=0;ba<ca.length;++ba){if(ja.length===ba||ca[ba]>ja[ba])return-1;
if(ca[ba]!==ja[ba])return 1}return 0};x.prototype.Zp=function(){return 0>=this.c$()};x.prototype.eK=function(){this.Kf||(this.Kf=new h,this.Zp()?this.Kf.request={t:"cAnnots"}:this.Kf.request={t:"annots"},this.Dh(this.Kf.request));return this.Kf.promise};x.prototype.AF=function(ca,ja){this.sh[ja]||(this.sh[ja]=new h,this.sh[ja].request={t:"image",p:ja},this.a0(ca,this.sh[ja].request));return this.sh[ja].promise};x.prototype.Fma=function(ca){this.pj[ca]||(this.pj[ca]=new h,this.pj[ca].request={t:"text",
p:ca},this.Dh(this.pj[ca].request));return this.pj[ca].promise};x.prototype.Gma=function(ca,ja,ba,ea,ia){var ha=this.hg.length;this.fD.length&&(ha=this.fD.pop());this.hg[ha]=new h;this.hg[ha].request={t:"tiles",p:ja,z:ba,r:ea,size:ia,rID:ha};this.a0(ca,this.hg[ha].request);return this.hg[ha].promise};x.prototype.I_=function(){this.Bf||(this.Bf=new h,this.Bf.request={t:"pdf"},this.rU?this.Bf.resolve({url:this.zJ}):this.Dh(this.Bf.request));return this.Bf.promise};x.prototype.eW=function(ca){var ja=
this,ba=new XMLHttpRequest,ea=Object(b.a)(this.cf+"aul",{id:this.id}),ia=new FormData,ha={};ca.annots&&(ha.annots="xfdf");ca.watermark&&(ha.watermark="png");ca.redactions&&(ha.redactions="redact");ha={t:"docmod",reqID:this.IY++,parts:ha};ca.print&&(ha.print=!0);var la=this.Iw(ha);ia.append("msg",JSON.stringify(la));return Promise.all([ca.annots,ca.watermark,ca.redactions].map(function(ka){return Promise.resolve(ka)})).then(function(ka){var pa=ka[0],qa=ka[1];ka=ka[2];pa&&ia.append("annots",pa);qa&&
ia.append("watermark",qa);ka&&ia.append("redactions",ka);ja.lj[la.reqID]=new h;ba.open("POST",ea);ba.withCredentials=ja.ai;pa=new Promise(function(ra,ua){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?ra():ua("An error occurred while sending down annotation data to the server"))}});ba.send(ia);return pa.then(function(){return ja.lj[la.reqID].promise})})};x.prototype.LW=function(){this.Ie||(this.Ie=new h,this.Ie.request={t:"xod",noCreate:!0},this.Dh(this.Ie.request));return this.Ie.promise};
x.prototype.Hma=function(){this.Je||(this.Je=new h,this.Je.request={t:"xod"},this.Dh(this.Je.request));return this.Je.promise};x.prototype.Vo=function(){return!0};x.prototype.request=function(){};x.prototype.b_=function(){};x.prototype.abort=function(){for(var ca=0;ca<this.hg.length;ca++)this.hg[ca]&&(this.hg[ca].resolve(null),this.hg[ca]=null,this.fD.push(ca));this.close()};x.prototype.NF=function(ca){this.xh=this.xh||{};this.xh.headers=ca};x.prototype.$o=function(ca){this.xh=this.xh||{};this.xh.internal=
this.xh.internal||{};this.xh.internal.withCredentials=ca};x.prototype.ai=function(){return this.xh&&this.xh.internal?this.xh.internal.withCredentials:null};x.prototype.getFileData=function(){return Promise.reject()};return x}();Object(Aa.a)(r);Object(e.a)(r);Object(e.b)(r);wa["default"]=r},488:function(Aa,wa,r){var oa=r(0),na=r(2),ma=r(23),fa=r(43),da=r(178),aa=r(79),y=function(){function f(e,a,b,h,n,z){void 0===b&&(b=null);void 0===h&&(h=null);void 0===n&&(n=null);void 0===z&&(z=null);this.rY=!1;
this.pi=0;this.hT=this.Kra(e);this.url=a?this.hT+"/"+a:this.hT+"/ws";this.qJ=b;this.Ey=h;this.Gw=n;this.zN=z}f.prototype.Kra=function(e){var a=e.indexOf("://"),b="ws://";0>a?a=0:(5===a&&(b="wss://"),a+=3);var h=e.lastIndexOf("/");0>h&&(h=e.length);return b+e.slice(a,h)};f.prototype.send=function(e){this.np.readyState===WebSocket.CLOSED||this.rY||this.np.send(JSON.stringify(e))};f.prototype.fE=function(){return Object(oa.b)(this,void 0,void 0,function(){var e,a=this;return Object(oa.d)(this,function(){e=
Object(fa.a)("wvsQueryParameters");e.bcid=Object(ma.l)(8);Object(fa.b)("wvsQueryParameters",e);return[2,new Promise(function(b,h){var n=Object(da.a)(a.url);a.np=new WebSocket(n);a.np.onopen=function(){a.Ey&&a.Ey();b()};a.np.onerror=function(z){a.rY=!0;h(z)};a.np.onclose=function(z){var x=z.code;return Object(oa.b)(a,void 0,void 0,function(){var ca=this;return Object(oa.d)(this,function(ja){switch(ja.label){case 0:return this.Gw&&this.Gw(),3E3===x?[3,3]:8>this.pi++?[4,new Promise(function(ba){return setTimeout(function(){return Object(oa.b)(ca,
void 0,void 0,function(){return Object(oa.d)(this,function(ea){switch(ea.label){case 0:return this.zN(),[4,this.fE()];case 1:return ea.ca(),ba(),[2]}})})},3E3)})]:[3,2];case 1:return ja.ca(),[3,3];case 2:h(aa.a),ja.label=3;case 3:return[2]}})})};a.np.onmessage=function(z){z&&z.data&&(z=JSON.parse(z.data),z.hb?a.send({hb:!0}):z.end?close():a.qJ(z))}})]})})};f.prototype.rq=function(e){void 0===e&&(e=!1);this.pi=0;e?this.np.close(3E3):this.np.close();return Promise.resolve()};return f}(),w=function(){function f(e,
a,b,h,n,z,x){void 0===h&&(h=null);void 0===n&&(n=null);void 0===z&&(z=null);void 0===x&&(x=null);this.pi=this.zF=this.id=0;this.Rx=!1;this.request=null;e=this.cla(e);this.url=a?e+"/"+a+"pf":e+"/pf";this.tG=b;this.qJ=h;this.Ey=n;this.Gw=z;this.zN=x}f.prototype.cla=function(e){var a=e.lastIndexOf("/");0>a&&(a=e.length);return e.slice(0,a)};f.prototype.aaa=function(e){e=e.split("\n");for(e[e.length-1]&&e.pop();0<e.length&&3>e[e.length-1].length;)"]"===e.pop()&&(this.id=0);0<e.length&&3>e[0].length&&
e.shift();for(var a=0;a<e.length;++a)e[a].endsWith(",")&&(e[a]=e[a].substr(0,e[a].length-1));return e};f.prototype.R_=function(){return Object(oa.b)(this,void 0,void 0,function(){var e=this;return Object(oa.d)(this,function(a){switch(a.label){case 0:return 8>this.pi++?[4,new Promise(function(b){return setTimeout(function(){e.zN();e.fE();b()},3E3)})]:[3,2];case 1:a.ca(),a.label=2;case 2:return[2]}})})};f.prototype.ela=function(e){Object(oa.b)(this,void 0,void 0,function(){var a,b;return Object(oa.d)(this,
function(h){switch(h.label){case 0:a=null,b=0,h.label=1;case 1:if(!(b<e.length))return[3,6];a=JSON.parse(e[b]);if(!a)return[3,5];if(!a.end)return[3,2];close();return[3,5];case 2:if(!a.id||Number(a.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");this.rq();return[4,this.R_()];case 3:return h.ca(),[3,5];case 4:a.hb&&Number(a.id)===this.id?this.send({hb:!0}):this.Rx||this.qJ(a),h.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};f.prototype.Bja=function(e){Object(oa.b)(this,
void 0,void 0,function(){var a,b,h;return Object(oa.d)(this,function(n){switch(n.label){case 0:if(!(3<=e.readyState))return[3,2];try{a=e.responseText.length}catch(z){return Object(na.h)("caught exception"),[2]}if(0<a)try{b=this.aaa(e.responseText),0===this.id&&0<b.length&&(h=JSON.parse(b.shift()),this.id=h.id,this.pi=0),this.ela(b)}catch(z){}return this.Rx?[3,2]:[4,this.gV()];case 1:n.ca(),n.label=2;case 2:return[2]}})})};f.prototype.gV=function(){return Object(oa.b)(this,void 0,void 0,function(){var e=
this;return Object(oa.d)(this,function(){return[2,new Promise(function(a,b){function h(){return Object(oa.b)(e,void 0,void 0,function(){return Object(oa.d)(this,function(z){switch(z.label){case 0:b(),this.rq(),z.label=1;case 1:return this.Rx&&8>this.pi?[4,this.R_()]:[3,3];case 2:return z.ca(),[3,1];case 3:return[2]}})})}e.request=new XMLHttpRequest;e.request.withCredentials=e.tG;var n=Object(da.a)(e.url,0!==e.id?{id:String(e.id),uc:String(e.zF)}:{uc:String(e.zF)});e.zF++;e.request.open("GET",n,!0);
e.request.setRequestHeader("Cache-Control","no-cache");e.request.setRequestHeader("X-Requested-With","XMLHttpRequest");e.request.onreadystatechange=function(){e.Bja(e.request)};e.request.addEventListener("error",h);e.request.addEventListener("timeout",h);e.request.addEventListener("load",function(){e.Ey&&e.Ey();a()});e.request.send()})]})})};f.prototype.fE=function(){var e=Object(fa.a)("wvsQueryParameters");e.bcid=Object(ma.l)(8);Object(fa.b)("wvsQueryParameters",e);this.zF=this.id=0;this.Rx=!1;return this.gV()};
f.prototype.send=function(e){var a=this,b=new XMLHttpRequest;b.withCredentials=this.tG;var h=Object(da.a)(this.url,{id:String(this.id)}),n=new FormData;n.append("data",JSON.stringify(e));b.addEventListener("error",function(){a.rq()});b.open("POST",h);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(n)};f.prototype.rq=function(){this.id=0;this.Rx=!0;this.Gw&&this.Gw();this.request.abort();return Promise.resolve()};return f}();Aa=function(){function f(e,a,b){this.QT=e;this.target=a;this.tG=
b}f.prototype.Rda=function(e,a,b,h,n){void 0===e&&(e=!0);void 0===a&&(a=null);void 0===b&&(b=null);void 0===h&&(h=null);void 0===n&&(n=null);return e?new y(this.QT,this.target,a,b,h,n):new w(this.QT,this.target,this.tG,a,b,h,n)};return f}();wa.a=Aa}}]);}).call(this || window)
